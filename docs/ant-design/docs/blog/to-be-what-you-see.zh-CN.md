### 问题1：范围限定和实际值不同的时候，如何处理？

在开发过程中，如果范围限定和实际值不同的情况下，我们应该如何处理？以一个展示组件为例，假设我们有以下代码：

```tsx
interface StrProps {
  value: string;
}

function MyStr({ value }: StrProps) {
  return <div>{value}</div>;
}
<MyStr value="Hello World" />;
```

根据以上代码，页面上会展示 "Hello World"。接下来，我们为组件添加了一个范围限定的属性：

```tsx
interface StrProps {
  value: string;
  maxLen?: number;
}
```

这个时候，当我们为 value 传入一个超出范围的值时，应该如何处理呢？例如：

```tsx
<MyStr value="Hello World" maxLen={5}>
```

这个问题涉及到不同的处理方式，我们需要考虑具体情况下的最佳解决方案。请继续阅读后续内容。

### 问题2：原生 input 的 maxLength 属性的限制是如何工作的？

使用原生的 input 组件时，通过设置 maxLength 属性可以限制用户输入的字符数。例如：

```tsx
<input value="Hello World" maxLength={5} />
```

然而，实际上 maxLength 只限制用户的输入，并不会自动截断已有的文本。这是因为根据标准描述，maxLength 属性仅仅声明了用户可以输入的字符数目，而不会对现有的值进行处理。标准描述如下：

> A form control maxlength attribute, controlled by the dirty value flag, declares a limit on the number of characters a user can input.

通过以上信息可以看出，在使用原生 input 组件时，maxLength 属性的限制行为并非我们通常所期望的自动截断已有的文本。

### 问题3：如何处理范围限定和实际值冲突的情况？

当范围限定和实际值冲突时，我们应该如何处理呢？这个问题要根据具体的业务场景来确定最佳的解决方案。是否需要对值进行截断处理，展示一个警告信息，或者是其他处理方式，都需要根据实际需求来决定。

总结起来，处理范围限定和实际值冲突的情况是一个需要根据具体场景进行判断的问题。在日常开发中，我们需要根据业务需求和用户体验来确定最佳的处理方式。

### 什么是输入型组件？
输入型组件指的是用户可以通过输入数据来修改其展示值的组件，比如文本框、下拉框、数字输入框等。

### 为什么不能直接在表单上做限制？
在现有的商品编辑场景中，直接在表单上做价格限制会导致用户的商品价格被改变，从而引起用户的困惑和不满。因此，在修改现有数据时，应该避免对实际值进行直接修改。

### 如何避免直接修改实际值？
为了避免直接修改实际值，在现有商品编辑场景中，可以采取以下策略：
1. 在表单组件中设置限制条件，例如在`<InputNumber>`组件上添加`max`属性，限制价格不超过 99 元。
2. 当用户编辑商品时，先将实际值存储在状态中，然后在表单中展示该状态值。这样用户在编辑时，只会修改表单的展示值，不会直接修改实际值。

通过以上策略，可以确保在编辑过程中不会直接修改实际值，从而避免用户的困惑和不满。

### 如何在组件库层面处理边界场景？

在组件库层面，应该采取最保守的方式来处理边界场景，不要“推测”用户的使用场景。一种优化手段是将限制设置到 Form.Item 的 `rules` 上，利用表单校验能力来实现限制。另外，对于一些组件本身，可以添加显式的样式提醒。例如，可以在输入型组件上添加提示样式，或者在非输入型自定义组件上添加 Tooltip 或其他展示方式。

### 如何在组件中添加显式的样式提醒？

对于一些组件本身，可以添加显式的样式提醒。例如，在输入型组件上可以添加提示样式，显示给用户当前输入的内容是否符合限制。这样可以增强用户体验，提醒用户输入的有效性。另外，还可以在非输入型自定义组件上添加 Tooltip 或其他展示方式，通过设计来提醒用户。

### 如何在组件库中处理非输入型自定义组件的样式提醒？

对于非输入型自定义组件，可以采用不同的方式来处理样式提醒。一种方式是在展示组件上添加 Tooltip，通过鼠标悬停或点击展示更多相关信息或提醒用户。另外，还可以使用其他展示方式，例如使用省略号或其他符号来表示内容的截断或超过限制。通过这些设计手段，可以提醒用户非输入型自定义组件的相关信息。

#### Q: 在组件研发中，应该如何处理边界场景？
##### A: 在组件研发中需要慎重处理边界场景，特别是在大型项目中。开发者需要考虑到上游使用者可能并不知道组件的内部逻辑是如何处理的。因此，在处理默认行为时，建议选择保守的方式。如果需要满足特定需求，可以通过高阶组件（HOC）或者额外的配置 Props 来实现。

#### Q: 为什么在组件研发中要保守处理默认行为？
##### A: 在组件研发中保守处理默认行为的目的是为了避免开发者在使用组件时面临过多的约定。默认行为应该符合一般情况下的需求，而对于特殊需求，可以通过其他方式满足，如通过 HOC 或者配置 Props。

#### Q: 使用 HOC 或者配置 Props 有什么好处？
##### A: 使用高阶组件（HOC）或者配置 Props 有以下好处：
1. 增加了组件的灵活性，能够满足更多不同需求的场景。
2. 可以根据具体情况进行定制化配置，减少了对默认行为的依赖。
3. 提高了组件的可复用性，可以在不同项目中重复使用。

希望以上信息对你有所帮助！如果有任何其他问题，请随时提问。